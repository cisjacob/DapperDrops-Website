<%- include('partials/header'); %>

<div class="container text-center">
  <div class="row">
      <div class="col-lg-6 col-sm-12 mb-5">
          <div id="carouselExampleControls" class="carousel slide" data-bs-ride="carousel">
          <div class="carousel-inner">

            <!-- Checks if content is undefined -->
            <% if(content != undefined) { %>

              <!-- Checks if homeImage has content inside -->
              <% if(content.homeImage.length == 0) { %>
                <div class="carousel-item active">
                  <img src="images/default/home/image1.jpg" class="d-block squareHomeAboutUs"  alt="...">
                </div>
                <div class="carousel-item">
                  <img src="images/default/home/image2.jpg" class="d-block squareHomeAboutUs" alt="...">
                </div>
                <div class="carousel-item">
                  <img src="images/default/home/image3.jpg" class="d-block squareHomeAboutUs" alt="...">
                </div>

              <% } else { %>

                <% for(let i = 0; i < content.homeImage.length; i++){ %>
                  <% if(i == content.homeImage.length - 1) { %>
                    <div class="carousel-item active">
                      <img src="<%= content.homeImage[i].image.url %>" class="d-block squareHomeAboutUs" alt="...">
                    </div>
                  <% } else { %>
                    <div class="carousel-item">
                      <img src="<%= content.homeImage[i].image.url %>" class="d-block squareHomeAboutUs" alt="...">
                    </div>
                  <% } %>
                <% } %>
              <% }%>

            <% } else { %>

              <div class="carousel-item active">
                <img src="images/default/home/image1.jpg" class="d-block squareHomeAboutUs" alt="...">
              </div>
              <div class="carousel-item">
                <img src="images/default/home/image2.jpg" class="d-block squareHomeAboutUs" alt="...">
              </div>
              <div class="carousel-item">
                <img src="images/default/home/image3.jpg" class="d-block squareHomeAboutUs" alt="...">
              </div>
              
            <% } %>
          </div>
          <button class="carousel-control-prev" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="prev">
            <span class="carousel-control-prev-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Previous</span>
          </button>
          <button class="carousel-control-next" type="button" data-bs-target="#carouselExampleControls" data-bs-slide="next">
            <span class="carousel-control-next-icon" aria-hidden="true"></span>
            <span class="visually-hidden">Next</span>
          </button>
        </div>
      </div>
      <div class="header col-lg-6 col-sm-10">
          <% if(content == null) { %>
            <h1 class="cust-landing-text">DEFAULT TEXT</h1><br>
            <p class="cust-landing-text">Click Register to start the dapper experience!</p>
            <p class="banner">Already have an account? Start shopping now!</p>
            <div class="dropdown">
              <a class="btn btn-primary mt-3"  href="/account/register" style="background-color: black; border: black;">Register</a>
              <button class="btn btn-primary mt-3" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: black; border:black;">Shop <i class="fa-solid fa-caret-down"></i></button>
              <ul class="dropdown-menu">                                
                      <a class ="dropdown-item" href="/products/onhand" >On-Hand</a>
                      <li><hr class="dropdown-divider"></li>
                      <a class ="dropdown-item" href="/products/preorder" >Pre-Order</a>
                      <li><hr class="dropdown-divider"></li>
                      <a class ="dropdown-item" href="/products/apparel" >Apparel</a>
                      <li><hr class="dropdown-divider"></li>
                      <a class ="dropdown-item" href="/products/accessories" >Accessories</a>


                  
              </ul>
          </div>
          <% } else { %>
            <h1 class="cust-landing-text"><%= content.homeText %></h1><br>
            <p class="banner">Click Register to start the dapper experience!</p>
            <p class="banner">Already have an account? Start shopping now!</p>
            <div class="dropdown">
              <a class="btn btn-primary mt-3"  href="/account/register" style="background-color: black; border:black;">Register</a>
              <button class="btn btn-primary mt-3" type="button" data-bs-toggle="dropdown" aria-expanded="false" style="background-color: black; border:black;">Shop <i class="fa-solid fa-caret-down"></i></button>
              <ul class="dropdown-menu">                                
                      <a class ="dropdown-item" href="/products/onhand" >On-Hand</a>
                      <li><hr class="dropdown-divider"></li>
                      <a class ="dropdown-item" href="/products/preorder" >Pre-Order</a>
                      <li><hr class="dropdown-divider"></li>
                      <a class ="dropdown-item" href="/products/apparel" >Apparel</a>
                      <li><hr class="dropdown-divider"></li>
                      <a class ="dropdown-item" href="/products/accessories" >Accessories</a>


                  
              </ul>
          </div>
          <% } %>

      </div>
  </div>
</div>

<div class="container mt-5">
  <h1 class="cust-title-text">New Arrivals</h1>
  
  <div class="row">
    <%newArrivals.forEach(function(product){%>
      <div class="col-lg-4 col-sm-6">
        <a href="/products/item/<%= product._id %>" class="cust-prod-link">
          <div class="card border-0 " style="width: 18rem;">
            <img src="<%= product.image.url %>" class="card-img-top" style="width: 250px; height:250px;object-fit:cover;"  alt="...">
            <div class="card-body">
              <p class="card-text"> <%= product.brand %></p>
              <p class="card-text cust-prod-text"> <%= product.name %> </p>
              <p class="card-text cust-prod-text">₱ <%= product.price %> </p>
            </div>
          </div>
        </a>  
      </div>
    <% }) %>
  </div>
</div>

<div class="container mt-5">
  <h1 class="cust-title-text">Featured Products</h1>
  
  <div class="row">
    <%newArrivals.forEach(function(product){%>
      <div class="col-lg-4 col-sm-6">
        <a href="/products/item/<%= product._id %>" class="cust-prod-link">
          <div class="card border-0 " style="width: 18rem;">
            <img src="<%= product.image.url %>" class="card-img-top" style="width: 250px; height:250px;object-fit:cover;"  alt="...">
            <div class="card-body">
              <p class="card-text"> <%= product.brand %></p>
              <p class="card-text cust-prod-text"> <%= product.name %> </p>
              <p class="card-text cust-prod-text">₱ <%= product.price %> </p>
            </div>
          </div>
        </a>  
      </div>
    <% }) %>
      
  </div>
</div>

<%- include('partials/footer', { content: content }); %>